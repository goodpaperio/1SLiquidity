#!/usr/bin/env node

const fs = require("fs");
const path = require("path");

// Read the generated setup script
const setupScriptPath = path.join(
  __dirname,
  "../script/processes/SetupBalancerV2Pools.s.sol"
);
let content = fs.readFileSync(setupScriptPath, "utf8");

// Fix the checksum addresses based on the error messages
const checksumFixes = {
  "0x96646936B91d6b9D7D0C47c496AFBf3D6ec7B6f8":
    "0x96646936b91d6B9D7D0c47C496AfBF3D6ec7B6f8",
  "0x0b09deA16768f0799065C475bE02919503cB2a35":
    "0x0b09deA16768f0799065C475bE02919503cB2a35",
  "0xA69ad41bbd9303f2c165d19B5564325DA72c7224":
    "0xa69ad41BBD9303f2c165d19b5564325Da72c7224",
  "0x4D7880B18373FD916BBe63227509a187a41f8B62":
    "0x4d7880b18373fD916bBe63227509a187A41F8b62",
  "0x9F383F91c89cBd649c700C2Bf69C2a828aF299Aa":
    "0x9f383F91C89CBd649c700C2BF69c2a828af299Aa",
  "0x5c6ee304399dbDB9C8Ef030ab642B10820dB8F56":
    "0x5c6Ee304399DBdB9C8Ef030aB642B10820DB8F56",
  "0xF4c0DD9B82DA36c07605df83C8a416f11724d88B":
    "0xF4C0DD9B82DA36C07605df83c8a416F11724d88b",
  "0x1E19cf2D73a72EF1332C882F20534B6519be0276":
    "0x1E19CF2D73a72Ef1332C882F20534B6519Be0276",
  "0xfD1cF6Fd41f229cA86Ada0584c63C49C3D66bBc9":
    "0xFD1Cf6FD41F229Ca86ada0584c63C49C3d66BbC9",
  "0x32296969EF14Eb0c6D29669c550d4A0449130230":
    "0x32296969Ef14EB0c6d29669C550D4a0449130230",
  "0x3e5fA9518eA95C3e533Eb377c001702A9AAcAA32":
    "0x3e5FA9518eA95c3E533EB377C001702A9AaCAA32",
  "0xe99481dc77691D8e2456E5F3F61C1810aDfC1503":
    "0xE99481DC77691d8E2456E5f3F61C1810adFC1503",
  "0xeFDc9246E0C4280fB1c138e1093a95ab88959cF8":
    "0xefDC9246E0c4280fb1c138e1093a95Ab88959CF8",
  "0xEfaA1604e82e1B3AF8430B90192c1B9e8197e377":
    "0xEFAa1604e82e1B3AF8430b90192c1B9e8197e377",
  "0x9c6D47FF73E0f5e51BE5fD53236E3f595C5793F2":
    "0x9c6d47Ff73e0F5E51BE5FD53236e3F595C5793F2",
  "0x87A867f5D240a782D43D90B6B06dEa470F3F8F22":
    "0x87a867f5D240a782d43D90b6B06DEa470F3f8F22",
  "0x5AA90c7362ea46b3cbFbd7f01eA5Ca69C98fEf1c":
    "0x5Aa90c7362ea46b3cbFBD7F01EA5Ca69C98Fef1c",
  "0x4626D81b3A1711BEb79f4cecff2413886D461677":
    "0x4626d81b3a1711bEb79f4CEcFf2413886d461677",
  "0x9c08C7a7a89CfD671c79EAcdC6f07c1996277Ed5":
    "0x9c08C7a7a89cfD671c79eacdc6F07c1996277eD5",
  "0x14462305d211c12a736986f4E8216E28C5EA7Ab4":
    "0x14462305D211C12A736986F4E8216E28c5EA7Ab4",
  "0x4aA462d59361fC0115b3aB7e447627534A8642AE":
    "0x4aA462D59361fC0115B3aB7E447627534a8642ae",
  "0x614b5038611729Ed49E0deD154d8A5D3AF9D1D9E":
    "0x614b5038611729ed49e0dED154d8A5d3AF9D1D9E",
  "0x89eA4363bD541D27D9811e4Df1209dAa73154472":
    "0x89EA4363Bd541d27d9811E4Df1209dAa73154472",
  "0x02DCA886B5aF3B6400254D9909aF9fb4b320794E":
    "0x02DCa886B5Af3b6400254D9909Af9FB4B320794E",
  "0x813E6a5F31c95F7c5F9982B1fdC6c69610Beab4A":
    "0x813E6A5f31C95F7c5f9982B1FDc6C69610bEab4A",
  "0xA0cF2478a7A9Fadd53Ce24665399AA80C7eB5075":
    "0xa0cF2478a7a9FaDd53ce24665399Aa80C7eb5075",
  "0x6e13fb316613e6b73dBF83A74f4aA08154aBd533":
    "0x6E13fB316613e6B73dbF83a74f4aa08154abd533",
  "0x36128D5436D2d70CaB39c9aF9cCE146c38554Ff0":
    "0x36128D5436d2d70cab39C9AF9CcE146C38554ff0",
  "0xEd9eee3A0a98d84Ce6bb33aC8BDdAED1B5302f02":
    "0xeD9eEe3A0a98d84CE6Bb33Ac8BdDaeD1b5302F02",
  "0xF7f310684a7a2db2AD6ad4032D61E763F99bf272":
    "0xF7f310684A7A2dB2aD6Ad4032d61E763f99Bf272",
  "0xbb5820734d6d1623C1a8b39C848BcfB1417BaC19":
    "0xBB5820734d6d1623c1a8b39c848BcFB1417bAc19",
  "0xb1b908BF850B75D20CBcE5F4A3f8D8082F64bB2C":
    "0xB1b908BF850b75d20cbCE5F4A3f8D8082F64BB2C",
  "0x733BD33dd0604028f31aACA029c6CC14bdA8A367":
    "0x733BD33Dd0604028f31AacA029C6cc14BdA8a367",
  "0x2DD73658B2351dA4C8fEe8aF2135B007db37B362":
    "0x2DD73658B2351da4c8fee8AF2135B007db37B362",
  "0x0cE45bA1C33E0741957881E05dAFf3B1e2954a9b":
    "0x0Ce45bA1C33e0741957881e05DAFf3b1e2954A9B",
};

// Apply fixes
for (const [wrong, correct] of Object.entries(checksumFixes)) {
  content = content.replace(new RegExp(wrong, "g"), correct);
}

// Write the fixed content back
fs.writeFileSync(setupScriptPath, content);

console.log("Fixed checksum addresses in SetupBalancerV2Pools.s.sol");
